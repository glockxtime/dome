<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>tap for video</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#000000" />

  <!-- Sans-serif nette, proche Haas -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --fit-mode: fill; /* fill = zéro bande (peut déformer) | cover = crop élégant */
      --bg: #000;
      --fg: #fff;
      --muted: rgba(255,255,255,.6);
      --accent: rgba(255,255,255,.85);
      --border: rgba(255,255,255,.25);
      --vh: 100dvh;
      --vw: 100dvw;
    }

    * { box-sizing: border-box; }
    html, body {
      margin: 0; padding: 0;
      height: 100%; width: 100%;
      background: var(--bg);
      color: var(--fg);
      font-family: Inter, -apple-system, BlinkMacSystemFont, "Helvetica Neue", Arial, sans-serif;
      letter-spacing: 0.01em;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      overflow: hidden;
    }

    #stage {
      position: fixed; inset: 0;
      width: var(--vw); height: var(--vh);
      padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
      background: var(--bg);
    }

    #overlay {
      position: absolute; inset: 0;
      display: grid;
      grid-template-rows: auto 1fr auto;
      grid-template-columns: 1fr;
      padding: 20px;
      text-transform: lowercase;
      background: var(--bg);
      cursor: pointer;
      transition: opacity .35s ease;
      user-select: none;
    }

    .top {
      align-self: start; justify-self: start;
      display: grid; gap: 6px;
    }
    .kicker {
      font-size: 14px; line-height: 1; color: var(--muted);
      letter-spacing: .08em;
    }
    .name {
      font-size: 14px; line-height: 1;
      text-transform: none;
      color: var(--muted); /* même gris que Fire., chair, wheel, trench */
    }

    .center {
      align-self: center; justify-self: center;
      display: flex; align-items: center; justify-content: center;
    }
    .cta {
      display: inline-flex; align-items: center; justify-content: center;
      padding: 14px 22px;
      border: 1px solid var(--border);
      border-radius: 999px;
      font-size: 14px; line-height: 1;
      letter-spacing: .06em;
      text-transform: lowercase;
      background: transparent;
      transition: border-color .25s ease, transform .2s ease, opacity .2s ease;
    }
    .cta::after {
      content: '';
      display: block;
      width: 6px; height: 6px; border-radius: 50%;
      margin-left: 10px;
      background: var(--accent);
      opacity: .5;
      animation: pulse 1.6s ease-in-out infinite;
    }
    @keyframes pulse {
      0%,100% { opacity:.3; transform: scale(1); }
      50%     { opacity:1;  transform: scale(1.15); }
    }
    #overlay:hover .cta { border-color: rgba(255,255,255,.4); transform: translateY(-1px); }

    .bottom {
      align-self: end; justify-self: stretch;
      display: flex; align-items: baseline; justify-content: space-between;
      gap: 12px;
      color: var(--muted);
      font-size: 12px; line-height: 1.2;
      letter-spacing: .04em;
    }

    video {
      display: none;
      position: absolute; inset: 0;
      width: var(--vw); height: var(--vh);
      object-fit: var(--fit-mode);
      object-position: center center;
      background: var(--bg);
      transform: translateZ(0);
    }

    :fullscreen, :-webkit-full-screen { background: #000; overflow: hidden; }
  </style>
</head>
<body>
  <div id="stage">
    <div id="overlay" aria-label="tap for video">
      <div class="top">
        <div class="kicker">Fire.</div>
        <div class="name">Paul Bizcarguenaga</div>
      </div>

      <div class="center">
        <div class="cta">tap for video</div>
      </div>

      <div class="bottom">
        <div class="menu">chair / wheel / trench</div>
        <div class="meta">loop 0:05</div>
      </div>
    </div>

    <video id="player" autoplay muted playsinline webkit-playsinline loop></video>
  </div>

  <script>
    (function ensureViewportUnits() {
      if (CSS && CSS.supports && CSS.supports('height: 100dvh')) return;
      function setVars() {
        const h = window.visualViewport ? window.visualViewport.height : window.innerHeight;
        const w = window.visualViewport ? window.visualViewport.width  : window.innerWidth;
        document.documentElement.style.setProperty('--vh', h + 'px');
        document.documentElement.style.setProperty('--vw', w + 'px');
      }
      setVars();
      window.addEventListener('resize', setVars);
      if (window.visualViewport) visualViewport.addEventListener('resize', setVars);
    })();

    const videos  = ["video1.mp4", "video2.mp4", "video3.mp4"];
    const overlay = document.getElementById("overlay");
    const player  = document.getElementById("player");

    let started = false;

    async function enterFullscreen(el) {
      try {
        if (el.requestFullscreen) { await el.requestFullscreen(); return true; }
        if (el.webkitRequestFullscreen) { el.webkitRequestFullscreen(); return true; }
        if (el.msRequestFullscreen) { el.msRequestFullscreen(); return true; }
      } catch(e) {}
      return false;
    }

    async function startExperience() {
      if (started) return;
      started = true;

      const src = videos[Math.floor(Math.random() * videos.length)];
      player.src = src;
      player.style.display = "block";

      try { await player.play(); } catch (e) {}

      let fs = await enterFullscreen(document.documentElement);
      if (!fs) fs = await enterFullscreen(player);

      if (!fs && player.webkitEnterFullscreen) {
        try { player.webkitEnterFullscreen(); fs = true; } catch(e){}
      }

      overlay.style.opacity = 0;
      setTimeout(() => { overlay.style.display = "none"; }, 350);
    }

    overlay.addEventListener("click", startExperience, { passive: true });
    overlay.addEventListener("touchend", (e) => { e.preventDefault(); startExperience(); }, { passive: false });

    window.addEventListener("resize", () => {
      player.style.width = getComputedStyle(document.documentElement).getPropertyValue('--vw') || '100dvw';
      player.style.height = getComputedStyle(document.documentElement).getPropertyValue('--vh') || '100dvh';
    });
  </script>
</body>
</html>
